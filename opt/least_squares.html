

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Least squares &mdash; TMAC 0.2.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="TMAC 0.2.1 documentation" href="../index.html"/>
        <link rel="up" title="Optimization" href="../optimization.html"/>
        <link rel="next" title="Huber loss" href="huber_loss.html"/>
        <link rel="prev" title="Optimization" href="../optimization.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> TMAC
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../build.html">Download and install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core.html">Core functionality</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../optimization.html">Optimization</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Least squares</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-preparation">Data preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="huber_loss.html">Huber loss</a></li>
<li class="toctree-l2"><a class="reference internal" href="regression.html">Regularized regression</a></li>
<li class="toctree-l2"><a class="reference internal" href="inter_cvx_set.html">Intersection of convex sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="qcqp.html">Quadratically constrained quadratic program</a></li>
<li class="toctree-l2"><a class="reference internal" href="tv.html">Total variation for image processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="portfolio.html">Portfolio optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="svm.html">Support vector machine (SVM)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../equations.html">Equation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute to TMAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../io.html">Input/output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">TMAC</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../optimization.html">Optimization</a> &raquo;</li>
      
    <li>Least squares</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/opt/least_squares.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="least-squares">
<h1>Least squares<a class="headerlink" href="#least-squares" title="Permalink to this headline">¶</a></h1>
<p>We apply TMAC to solve the following least squares problem</p>
<div class="math">
\[\min_x \frac{1}{2}\|Ax-b\|^2,\]</div>
<p>where <span class="math">\(A\)</span> is an <span class="math">\(m\)</span> by <span class="math">\(n\)</span> matrix. We solve the problem with TMAC by using gradient descent.</p>
<div class="section" id="data-preparation">
<h2>Data preparation<a class="headerlink" href="#data-preparation" title="Permalink to this headline">¶</a></h2>
<p>We solve the least squares problem with dense matrix in matrix market format, and sparse matrix in LIBSVM format. You can easily modify the code to deal with other types of matrices.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>In the bin folder, the executable file <code class="xref cpp cpp-type docutils literal"><span class="pre">tmac_gd_ls</span></code> solves the least squares problem:</p>
<blockquote>
<div><p>The usage for tmac_gd_ls is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">tmac_gd_ls</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span>
           <span class="o">-</span><span class="n">data</span>       <span class="o">&lt;</span> <span class="n">matrix</span> <span class="n">market</span> <span class="n">file</span> <span class="k">for</span> <span class="n">A</span> <span class="o">&gt;</span>
           <span class="o">-</span><span class="n">label</span>      <span class="o">&lt;</span> <span class="n">matrix</span> <span class="n">market</span> <span class="n">file</span> <span class="k">for</span> <span class="n">b</span> <span class="o">&gt;</span>
           <span class="o">-</span><span class="n">nthread</span>    <span class="o">&lt;</span> <span class="n">total</span> <span class="n">number</span> <span class="n">of</span> <span class="n">threads</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="mf">1.</span> <span class="o">&gt;</span>
           <span class="o">-</span><span class="n">epoch</span>      <span class="o">&lt;</span> <span class="n">total</span> <span class="n">number</span> <span class="n">of</span> <span class="n">epochs</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="mf">10.</span> <span class="o">&gt;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>You can run the following command in the test directory to solve the least squares problem for the large dense dataset:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">./</span><span class="nb">bin</span><span class="o">/</span><span class="n">tmac_gd_ls</span> <span class="o">-</span><span class="n">data</span> <span class="o">./</span><span class="n">data</span><span class="o">/</span><span class="n">ds_large_A</span><span class="o">.</span><span class="n">mtx</span> <span class="o">-</span><span class="n">label</span> <span class="o">./</span><span class="n">data</span><span class="o">/</span><span class="n">ds_large_b</span><span class="o">.</span><span class="n">mtx</span> <span class="o">-</span><span class="n">epoch</span> <span class="mi">100</span> <span class="o">-</span><span class="n">nthread</span> <span class="mi">2</span> <span class="o">-</span><span class="k">lambda</span> <span class="mf">1.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The datasets are not included in the source code, but you can download them from <a class="reference external" href="https://www.dropbox.com/sh/neqh6ege48hut2x/AACv02EH19XN-N7DXADV2NrIa?dl=0">here</a>.</p>
</div>
<p>You can expect to get output similar to the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Parameter</span> <span class="n">settings</span><span class="p">:</span>
<span class="o">---------------------------------</span>
<span class="n">Problem</span> <span class="n">size</span><span class="p">:</span>               <span class="mi">1000</span>
<span class="n">TMAC</span> <span class="n">step</span> <span class="n">size</span><span class="p">:</span>            <span class="mf">0.5</span>
<span class="n">Operator</span> <span class="n">step</span> <span class="n">size</span><span class="p">:</span>         <span class="mf">0.8</span>
<span class="n">Use</span> <span class="n">controller</span><span class="p">:</span>             <span class="n">false</span>
<span class="o">---------------------------------</span>
<span class="n">Computing</span> <span class="n">time</span> <span class="ow">is</span><span class="p">:</span> <span class="mf">0.105244</span>
<span class="n">Objective</span> <span class="n">value</span> <span class="ow">is</span><span class="p">:</span> <span class="mf">28.74</span>
<span class="o">---------------------------------</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="huber_loss.html" class="btn btn-neutral float-right" title="Huber loss" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../optimization.html" class="btn btn-neutral" title="Optimization" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.2.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>